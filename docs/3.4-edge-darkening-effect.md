# Phase 3.4: Edge Darkening Effect

**Status**: âœ… COMPLETE

## Overview

Adds a watercolor-style outline by extracting a soft halo from the mask edges, tapering it, and compositing a darker color along the boundary.

## Implementation

**Location**: `internal/mask/edge.go`

- `CreateEdgeMask(mask, innerSigma, outerSigma)`: Differentiates outer and inner blurs to isolate the edge halo; normalizes to full 0-255.
- `TaperEdgeMask(edge, gamma)`: Applies a gamma curve to control halo falloff (steeper or softer outlines).
- `ApplyEdgeDarkening(base, edgeMask, darkColor, strength)`: Blends a dark overlay using the edge mask as alpha; preserves base alpha.

## Tests

**Location**: `internal/mask/edge_test.go`

- `TestCreateEdgeMaskProducesHalo`: Confirms center/outside stay near zero and edge region carries signal.
- `TestTaperEdgeMask`: Verifies gamma falloff transforms values as expected.
- `TestApplyEdgeDarkening`: Ensures edges darken while interior colors and alpha remain unchanged.

## Usage Example

```go
edge := CreateEdgeMask(watercolorMask, 1.0, 3.0)
tapered := TaperEdgeMask(edge, 1.5)
darkened := ApplyEdgeDarkening(paintedTile, tapered, color.NRGBA{R: 60, G: 40, B: 30, A: 255}, 0.6)
```

This produces a subtle, tapered outline that deepens feature edges without altering transparency.
