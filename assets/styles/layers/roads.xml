<?xml version="1.0" encoding="utf-8"?>
<Map background-color="#00000000" srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">

  <!-- Roads Layer Style -->
  <!-- Renders ALL roads in pure white (#FFFFFF) for mask extraction -->
  <!-- Line widths scale with road importance and zoom (scale denominators: z10-11 ~150k-1M, z12-13 ~50k-150k, z14+ <50k) -->

  <Style name="roads">
    <!-- z<10: No roads layer (only highways layer with motorway) -->

    <!-- z8-9: Trunk and primary roads with wide stroke for visibility at low zoom -->
    <Rule>
      <Filter>[highway] = 'trunk' or [highway] = 'trunk_link'</Filter>
      <MaxScaleDenominator>4000000</MaxScaleDenominator>
      <MinScaleDenominator>1000000</MinScaleDenominator>
      <LineSymbolizer stroke="#FFFFFF" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round" />
    </Rule>
    <Rule>
      <Filter>[highway] = 'primary' or [highway] = 'primary_link'</Filter>
      <MaxScaleDenominator>4000000</MaxScaleDenominator>
      <MinScaleDenominator>1000000</MinScaleDenominator>
      <LineSymbolizer stroke="#FFFFFF" stroke-width="3.0" stroke-linecap="round" stroke-linejoin="round" />
    </Rule>

    <!-- z10-11: Trunk and primary (motorway is in highways layer) -->
    <Rule>
      <Filter>[highway] = 'trunk' or [highway] = 'trunk_link'</Filter>
      <MaxScaleDenominator>1000000</MaxScaleDenominator>
      <MinScaleDenominator>150000</MinScaleDenominator>
      <LineSymbolizer stroke="#FFFFFF" stroke-width="4.0" stroke-linecap="round" stroke-linejoin="round" />
    </Rule>
    <Rule>
      <Filter>[highway] = 'primary' or [highway] = 'primary_link'</Filter>
      <MaxScaleDenominator>1000000</MaxScaleDenominator>
      <MinScaleDenominator>150000</MinScaleDenominator>
      <LineSymbolizer stroke="#FFFFFF" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round" />
    </Rule>

    <!-- z12: trunk, primary, secondary (motorway is in highways layer) -->
    <Rule>
      <Filter>[highway] = 'trunk' or [highway] = 'trunk_link'</Filter>
      <MaxScaleDenominator>150000</MaxScaleDenominator>
      <MinScaleDenominator>75000</MinScaleDenominator>
      <LineSymbolizer stroke="#FFFFFF" stroke-width="4.5" stroke-linecap="round" stroke-linejoin="round" />
    </Rule>
    <Rule>
      <Filter>[highway] = 'primary' or [highway] = 'primary_link'</Filter>
      <MaxScaleDenominator>150000</MaxScaleDenominator>
      <MinScaleDenominator>75000</MinScaleDenominator>
      <LineSymbolizer stroke="#FFFFFF" stroke-width="4.0" stroke-linecap="round" stroke-linejoin="round" />
    </Rule>
    <Rule>
      <Filter>[highway] = 'secondary' or [highway] = 'secondary_link'</Filter>
      <MaxScaleDenominator>150000</MaxScaleDenominator>
      <MinScaleDenominator>75000</MinScaleDenominator>
      <LineSymbolizer stroke="#FFFFFF" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round" />
    </Rule>

    <!-- z13: primary, secondary, tertiary (motorway+trunk in highways layer) -->
    <Rule>
      <Filter>[highway] = 'primary' or [highway] = 'primary_link'</Filter>
      <MaxScaleDenominator>75000</MaxScaleDenominator>
      <MinScaleDenominator>50000</MinScaleDenominator>
      <LineSymbolizer stroke="#FFFFFF" stroke-width="4.5" stroke-linecap="round" stroke-linejoin="round" />
    </Rule>
    <Rule>
      <Filter>[highway] = 'secondary' or [highway] = 'secondary_link'</Filter>
      <MaxScaleDenominator>75000</MaxScaleDenominator>
      <MinScaleDenominator>50000</MinScaleDenominator>
      <LineSymbolizer stroke="#FFFFFF" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round" />
    </Rule>
    <Rule>
      <Filter>[highway] = 'tertiary' or [highway] = 'tertiary_link'</Filter>
      <MaxScaleDenominator>75000</MaxScaleDenominator>
      <MinScaleDenominator>50000</MinScaleDenominator>
      <LineSymbolizer stroke="#FFFFFF" stroke-width="3.0" stroke-linecap="round" stroke-linejoin="round" />
    </Rule>

    <!-- z14 (50k-25k): secondary, tertiary, residential (motorway+trunk+primary in highways layer) -->
    <Rule>
      <Filter>[highway] = 'secondary' or [highway] = 'secondary_link'</Filter>
      <MaxScaleDenominator>50000</MaxScaleDenominator>
      <MinScaleDenominator>25000</MinScaleDenominator>
      <LineSymbolizer stroke="#FFFFFF" stroke-width="4.8" stroke-linecap="round" stroke-linejoin="round" />
    </Rule>
    <Rule>
      <Filter>[highway] = 'tertiary' or [highway] = 'tertiary_link'</Filter>
      <MaxScaleDenominator>50000</MaxScaleDenominator>
      <MinScaleDenominator>25000</MinScaleDenominator>
      <LineSymbolizer stroke="#FFFFFF" stroke-width="3.8" stroke-linecap="round" stroke-linejoin="round" />
    </Rule>
    <!-- Residential, unclassified, living_street, and catch-all removed for z14 to reduce visual clutter -->

    <!-- z15-17 (25k-3k): tertiary, residential (motorway+trunk+primary+secondary in highways layer) -->
    <Rule>
      <Filter>[highway] = 'tertiary' or [highway] = 'tertiary_link'</Filter>
      <MaxScaleDenominator>25000</MaxScaleDenominator>
      <MinScaleDenominator>3000</MinScaleDenominator>
      <LineSymbolizer stroke="#FFFFFF" stroke-width="4.0" stroke-linecap="round" stroke-linejoin="round" />
    </Rule>
    <Rule>
      <Filter>[highway] = 'residential' or [highway] = 'unclassified' or [highway] = 'living_street'</Filter>
      <MaxScaleDenominator>25000</MaxScaleDenominator>
      <MinScaleDenominator>3000</MinScaleDenominator>
      <LineSymbolizer stroke="#FFFFFF" stroke-width="3.0" stroke-linecap="round" stroke-linejoin="round" />
    </Rule>
    <!-- Minor roads (service, track, path, footway, cycleway, etc.) excluded at z15-17 -->

    <!-- z18+ (<3k): tertiary, residential, other (motorway+trunk+primary+secondary in highways layer) -->
    <Rule>
      <Filter>[highway] = 'tertiary' or [highway] = 'tertiary_link'</Filter>
      <MaxScaleDenominator>3000</MaxScaleDenominator>
      <LineSymbolizer stroke="#FFFFFF" stroke-width="7.6" stroke-linecap="round" stroke-linejoin="round" />
    </Rule>
    <Rule>
      <Filter>[highway] = 'residential' or [highway] = 'unclassified' or [highway] = 'living_street'</Filter>
      <MaxScaleDenominator>3000</MaxScaleDenominator>
      <LineSymbolizer stroke="#FFFFFF" stroke-width="4.0" stroke-linecap="round" stroke-linejoin="round" />
    </Rule>
    <Rule>
      <Filter>[highway] != ''</Filter>
      <MaxScaleDenominator>3000</MaxScaleDenominator>
      <LineSymbolizer stroke="#FFFFFF" stroke-width="3.2" stroke-linecap="round" stroke-linejoin="round" />
    </Rule>
  </Style>

  <!-- Data Layer -->
  <Layer name="roads" srs="+proj=longlat +datum=WGS84 +no_defs">
    <StyleName>roads</StyleName>
    <Datasource>
      <Parameter name="type">ogr</Parameter>
      <Parameter name="file">DATASOURCE_PLACEHOLDER</Parameter>
      <Parameter name="layer">LAYER_PLACEHOLDER</Parameter>
    </Datasource>
  </Layer>

</Map>
